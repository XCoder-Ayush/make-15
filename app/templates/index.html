<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make 15</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.js"
        integrity="sha512-lOrm9FgT1LKOJRUXF3tp6QaMorJftUjowOWiDcG5GFZ/q7ukof19V0HKx/GWzXCdt9zYju3/KhBNdCLzK8b90Q=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.css"
        integrity="sha512-NXUhxhkDgZYOMjaIgd89zF2w51Mub53Ru3zCNp5LTlEzMbNNAjTjDbpURYGS5Mop2cU4b7re1nOIucsVlrx9fA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script>
        let cellWhoseModalOpen = undefined;
        let numberSelectedInMove = undefined;
        let move = undefined;
        let playerId = undefined;
        let gameDetails = undefined;

        const URL = window.location.origin;
        // console.log(URL);
        // console.log(location.port);

        let socket = io()

        // console.log(socket);

        document.addEventListener("DOMContentLoaded", runBeforeLoad);

        async function runBeforeLoad() {

            const gameId = window.location.pathname.split('/').pop();

            document.querySelector('#copy-id').innerText = gameId;

            socket.emit('join_room', { roomId: gameId, userId: localStorage.getItem('currentUser') });


            //Button Copy 
            const contentContainer = document.querySelector('#copy-div');
            const copyButton = document.getElementById('copyButton');

            copyButton.addEventListener('click', function () {
                const textarea = document.createElement('textarea');
                textarea.value = contentContainer.textContent;
                document.body.appendChild(textarea);

                textarea.select();
                document.execCommand('copy');

                document.body.removeChild(textarea);

                new Noty({
                    type: 'info',
                    text: 'Room Id Copied',
                    layout: 'topRight',
                    theme: 'metroui',
                    timeout: 1000,
                    progressBar: true,
                }).show();
            });


            /**
             * Check If A Game With gameId exists in DB or not
            */
            const apiUrl = `${URL}/api/games/${gameId}`;

            try {
                const response = await fetch(apiUrl);

                if (response.ok) {
                    gameDetails = await response.json();

                    // Game Id Should Contain The Current User In Its Record:
                    let currentUser = localStorage.getItem('currentUser');
                    document.querySelector('#player-id').innerText = currentUser;
                    if (!(gameDetails.player1Id == currentUser || gameDetails.player2Id == currentUser)) {
                        console.error('Error:', response.statusText);
                        //Not Authorized Room Id Send To Home
                        window.location.href = '${URL}';
                        return;
                    }

                    // There Should Not Be 2 Sockets Connected

                } else {
                    console.error('Error:', response.statusText);
                    //Invalid Room Id Send To Home
                    window.location.href = '${URL}';
                    return;
                }
            } catch (error) {
                console.error('Error:', error);
            }


            // Join The Room: 

            // console.log(gameDetails);

            /**
                Since @moves inside @gameDetails is an empty array with size 0 and @move logically starts with 1.
             * 
            */
            move = gameDetails.moves.length + 1
            playerId = localStorage.getItem('currentUser');
            // console.log(playerId);
            // console.log(move);

            /**
                Cancel Move
             * 
            */
            const closeModalBtn = document.querySelector("#close-modal");
            if (closeModalBtn) {
                closeModalBtn.addEventListener("click", () => {
                    closeModal();
                });
            }

            //   Register Move:
            const applyMoveInModal = document.querySelector("#apply-move");
            if (applyMoveInModal) {
                applyMoveInModal.addEventListener("click", () => {
                    registerMove();
                });
            }

            //Add Event Listener To All The Number [1..9] Inside Modal
            for (let i = 1; i <= 9; i++) {
                const modalNumber = document.querySelector(`#modal-${i}`);
                modalNumber.addEventListener("click", () => {
                    toggleElementInModal(i);
                });
            }

            function createGridCell(ch, num) {
                const gridCell = document.createElement("div");
                const id = `cell-${ch}${num}`;
                gridCell.id = id;
                gridCell.className =
                    "h-auto w-auto border border-black shadow-lg p-4 flex items-center justify-center text-gray-300";
                gridCell.textContent = `${ch.toUpperCase()}${num}`;
                return gridCell;
            }

            function fillGrids() {
                for (let i = 1; i <= 9; i++) {
                    const ch = String.fromCharCode(i + 96);
                    const gridDiv = document.querySelector(`#grid-${ch}`);
                    for (let num = 1; num <= 9; num++) {
                        let gridCell = createGridCell(ch, num);
                        if ((playerId == gameDetails.player1Id && move % 2 == 1 || playerId == gameDetails.player2Id && move % 2 == 0)) {
                            gridCell.addEventListener("click", () => {
                                openModal(ch, num);
                            });
                        }
                        gridDiv.appendChild(gridCell);
                    }
                }
            }

            fillGrids();

            putLock();

            document.querySelector('#player-1-in-table').innerText = gameDetails.player1Id;
            document.querySelector('#player-2-in-table').innerText = gameDetails.player2Id;
            document.querySelector('#scorecard-btn').addEventListener('click', openScorecard);
            let overlays = document.querySelectorAll('.overlay');
            const scorecard = document.getElementById('scorecard');

            function closeScorecard() {
                scorecard.classList.add('hidden');
            }

            function openScorecard() {
                scorecard.classList.remove('hidden');
            }

            overlays.forEach((overlay) => {
                overlay.addEventListener('click', closeScorecard);
            });

            scorecard.addEventListener('click', function (event) {
                event.stopPropagation();
            });

            updateScorecard();

        }

        function putLock() {
            if ((playerId == gameDetails.player2Id && move % 2 == 1 || playerId == gameDetails.player1Id && move % 2 == 0)) {
                // console.log("Now, You Are Not Allowed To Make A Move");
                const containerElement = document.querySelector("#game-grid");
                if (containerElement) {
                    containerElement.style.pointerEvents = "none";
                    containerElement.style.cursor = "not-allowed";
                }
            }
        }

        function openLock() {
            if ((playerId == gameDetails.player2Id && move % 2 == 0) || (playerId == gameDetails.player1Id && move % 2 == 1)) {
                // console.log("Now, You Are Allowed To Make A Move");
                const containerElement = document.querySelector("#game-grid");
                if (containerElement) {
                    containerElement.style.pointerEvents = "auto";
                    containerElement.style.cursor = "pointer";
                    console.log(containerElement);
                }
            }
        }

        function addTableRow(dataA, dataB, dataC) {
            const tableBody = document.querySelector('tbody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td class="whitespace-nowrap px-6 py-4 font-medium">${dataA}</td>
                <td class="whitespace-nowrap px-6 py-4">${dataB}</td>
                <td class="whitespace-nowrap px-6 py-4">${dataC}</td>
            `;
            tableBody.appendChild(newRow);
        }

        function updateScorecard() {
            document.querySelector('#player-1-in-table').innerText = gameDetails.player1Id;
            document.querySelector('#player-2-in-table').innerText = gameDetails.player2Id;
            const tableBody = document.querySelector('tbody');
            tableBody.innerHTML = '';

            const teams = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I'];
            for (let i = 0; i < 9; i++) {
                const teamLabel = teams[i];
                const pointsArray = gameDetails[`pointsOf${teamLabel}`];
                addTableRow(teamLabel, pointsArray[0], pointsArray[1]);
            }
        }

        async function openModal(ch, num) {
            cellWhoseModalOpen = document.querySelector(`#cell-${ch}${num}`);
            const modal = document.querySelector("#modal");
            // Get Valid Moves From Backend

            // 1. Check Which Numbers Are There In Cell Already
            // 2. Check Which   
            const response = await fetch(`${URL}/api/moves`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    gameId: gameDetails.gameId,
                    currentCell: `${ch}${num}`,
                }),
            });

            const allNumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9];

            const numbersAllowed = await response.json();
            // console.log(numbersAllowed);


            const numbersNotAllowed = allNumbers.filter(number => !numbersAllowed.includes(number));
            // for (let i = 1; i <= 9; i++) {
            //     const gridCell = document.querySelector(`#cell-${ch}${i}`);
            //     const content = gridCell.innerText;
            //     // console.log(content);
            //     if (/^\d$/.test(content)) {
            //         // If content is a single digit number
            //         numbersNotAllowed.push(gridCell.innerText);
            //     } else if (/^[A-I][1-9]$/.test(content)) {
            //         // console.log("Fuckk");
            //     } else {
            //         // Handle other cases if needed
            //         console.log("Not Possible. Bug!!!");
            //     }
            // }

            // console.log(numbersNotAllowed);

            numbersNotAllowed.forEach((number) => {
                const modalCell = document.querySelector(`#modal-${number}`);
                modalCell.classList.remove("text-green-500");
                modalCell.classList.add("text-red-500");
                modalCell.classList.add("line-through");
                modalCell.style.cursor = "not-allowed";
                modalCell.style.pointerEvents = "none";
            });

            // Unhide The Modal After All Processing
            modal.classList.remove("hidden");
        }

        function closeModal() {
            // Revert Back 
            for (let i = 1; i <= 9; i++) {
                const modalCell = document.querySelector(`#modal-${i}`);
                modalCell.style.cursor = "auto";
                modalCell.style.pointerEvents = "auto";
                modalCell.classList.remove("border-green-400");
                modalCell.classList.remove("text-green-500");
                modalCell.classList.remove("text-red-500");
                modalCell.classList.remove("line-through");
            }
            cellWhoseModalOpen = undefined;
            numberSelectedInMove = undefined;
            const modal = document.querySelector("#modal");
            modal.classList.add("hidden");
        }

        async function registerMove() {
            if (numberSelectedInMove) {
                // REST API Call After Adding Chosen Cell To moves array
                // console.log(cellWhoseModalOpen);
                const id = cellWhoseModalOpen.id.split('-')[1];
                const pair = [id, numberSelectedInMove];

                // First Task To Update Move In DB
                // I Should Trust Only DB Since Frontend Objects Can Be Manipulated

                // Fetch Latest gameDetails From DB

                try {
                    const response = await fetch(`${URL}/api/games/${gameDetails.gameId}`);
                    if (response.ok) {
                        gameDetails = await response.json();
                    } else {
                        console.error('Error:', response.statusText);
                    }
                } catch (error) {
                    console.error('Error:', error);
                }

                gameDetails.moves.push(pair);

                // PUT API Call
                const apiUrl = `${URL}/api/games/${gameDetails.gameId}`;
                try {
                    const response = await fetch(apiUrl, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(gameDetails)
                    });

                    if (response.ok) {
                        // console.log('Moves updated successfully');
                    } else {
                        console.error('Error:', response.statusText);
                    }
                } catch (error) {
                    console.error('Error:', error);
                }

                // Socket Event Emit:
                socket.emit('register_move', { playerId: playerId, roomId: gameDetails.gameId, move: id, input: numberSelectedInMove });

                // Frontend Manipulation:
                frontEndManipulationOnOwnMove();

                // Update gameDetails and move
                // move updated after FrontEnd Manipulation
                move = gameDetails.moves.length + 1;

                putLock();

                // Fetch Updated Score
                try {
                    const response = await fetch(`${URL}/api/games/${gameDetails.gameId}`);
                    if (response.ok) {
                        gameDetails = await response.json();
                    } else {
                        console.error('Error:', response.statusText);
                    }
                } catch (error) {
                    console.error('Error:', error);
                }

                updateScorecard();

                // socket.emit('square_winning_check', gameDetails)
                socket.emit('winning_check', gameDetails)
            }
        }

        function frontEndManipulationOnOwnMove() {
            new Noty({
                type: 'error',
                text: 'Now You Cannot Make A Move',
                layout: 'topRight',
                theme: 'metroui',
                timeout: 1000,
                progressBar: true,
            }).show();

            cellWhoseModalOpen.innerText = numberSelectedInMove;
            // Remove the abbrevation
            cellWhoseModalOpen.classList.remove("text-gray-300");
            // Add the regd move in the cell:
            cellWhoseModalOpen.classList.add("text-black");
            cellWhoseModalOpen.classList.add("font-bold");

            //RBRBRBRB
            if (move & 1) {
                cellWhoseModalOpen.classList.add("bg-green-100");
            } else {
                cellWhoseModalOpen.classList.add("bg-yellow-100");
            }

            cellWhoseModalOpen.style.cursor = "not-allowed";
            cellWhoseModalOpen.style.pointerEvents = "none";

            closeModal();
        }

        function frontEndManipulationOnOppMove(opponent, roomId, cellModified, input) {
            new Noty({
                type: 'success',
                text: 'Now You Can Make A Move',
                layout: 'topRight',
                theme: 'metroui',
                timeout: 1000,
                progressBar: true,
            }).show();

            let cellToBeModified = document.querySelector(`#cell-${cellModified}`)
            cellToBeModified.innerText = input;
            // Remove the abbrevation
            cellToBeModified.classList.remove("text-gray-300");
            // Add the regd move in the cell:
            cellToBeModified.classList.add("text-black");
            cellToBeModified.classList.add("font-bold");
            if (move & 1) {
                cellToBeModified.classList.add("bg-green-100");
            } else {
                cellToBeModified.classList.add("bg-yellow-100");
            }
            cellToBeModified.style.cursor = "not-allowed";
            cellToBeModified.style.pointerEvents = "none";

        }

        function toggleElementInModal(num) {
            // Remove All Classes:
            // console.log('HERE '+ num);
            for (let i = 1; i <= 9; i++) {
                const modalNumber = document.querySelector(`#modal-${i}`);
                modalNumber.classList.remove("border-green-400");
            }

            document.querySelector(`#modal-${num}`).classList.add("border-green-400");
            numberSelectedInMove = num;
        }

        socket.on('room_joined', function (data) {
            const user_id = data.user_id;
            const room_id = data.room_id;
            const link = `${URL}/game/${room_id}`;
            console.log(`${user_id} joined the room ${room_id}`);
            localStorage.setItem('currentUser', user_id);
        });

        socket.on('room_joined_notify', async function (data) {
            const user_id = data.user_id;
            const room_id = data.room_id;
            const link = `${URL}/game/${room_id}`;
            console.log(`${user_id} joined the room ${room_id}`);

            // Fetch Latest gameDetails from DB
            const apiUrl = `${URL}/api/games/${roomId}`;
            try {
                const response = await fetch(apiUrl);
                if (response.ok) {

                    gameDetails = await response.json();
                    // console.log('Updated Game Details:', gameDetails);

                } else {
                    console.error('Error:', response.statusText);
                }
            } catch (error) {
                console.error('Error:', error);
            }
            
            updateScorecard()
        });

        socket.on('wwcd', (pdata) => {
            if (pdata == playerId) {
                alert('You Won')
            } else {
                alert('You Lost')
            }
            window.location.href = `${URL}`
        })

        socket.on('draw', (data) => {
            // console.log(data);
            alert('Match Drawn')
            window.location.href = `${URL}`
        })

        socket.on('get_registered_move', async (data) => {
            // console.log(data);
            const opponent = data.playerId;
            const roomId = data.roomId;
            const cellModified = data.move;
            const input = data.input;


            frontEndManipulationOnOppMove(opponent, roomId, cellModified, input)

            // Fetch Latest gameDetails from DB
            const apiUrl = `${URL}/api/games/${roomId}`;
            try {
                const response = await fetch(apiUrl);
                if (response.ok) {

                    gameDetails = await response.json();
                    // console.log('Updated Game Details:', gameDetails);

                } else {
                    console.error('Error:', response.statusText);
                }
            } catch (error) {
                console.error('Error:', error);
            }

            move = gameDetails.moves.length + 1;
            // console.log(move);

            updateScorecard();

            // Add Event Listeners To All Cells
            for (let i = 1; i <= 9; i++) {
                const ch = String.fromCharCode(i + 96);
                for (let num = 1; num <= 9; num++) {
                    let gridCell = document.querySelector(`#cell-${ch}${num}`);
                    // console.log(move);
                    // console.log(playerId);
                    // console.log(gameDetails.player1Id);
                    // console.log(gameDetails.player2Id);

                    if ((playerId == gameDetails.player1Id && move % 2 == 1) || (playerId == gameDetails.player2Id && move % 2 == 0)) {
                        // console.log('Hocche');
                        gridCell.addEventListener("click", () => {
                            openModal(ch, num);
                        });
                    }
                }
            }

            openLock();

        })

        socket.on('square_won_check', (data) => {
            const winnerId = data['winner']
            const grid = data['square']
            for (let i = 1; i <= 9; i++) {
                let cell = document.querySelector(`#cell-${grid}${i}`)
                cell.classList.remove("bg-green-100")
                cell.classList.remove("bg-yellow-100");
                if (winnerId == gameDetails.player1Id) cell.classList.add("bg-green-100")
                else cell.classList.add("bg-yellow-100")
            }
            if (winnerId == playerId) {
                new Noty({
                    type: 'success',
                    text: `You Won Square ${grid.toUpperCase()}`,
                    layout: 'topRight',
                    theme: 'metroui',
                    timeout: 1500,
                    progressBar: true,
                }).show();
            } else {
                new Noty({
                    type: 'error',
                    text: `You Lost Square ${grid.toUpperCase()}`,
                    layout: 'topRight',
                    theme: 'metroui',
                    timeout: 1500,
                    progressBar: true,
                }).show();
            }
        })

    </script>
</head>

<body>
    <nav class="bg-gray-800">
        <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
            <div class="relative flex h-16 items-center justify-between">
                <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
                    <!-- Mobile menu button-->
                    <button type="button"
                        class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
                        aria-controls="mobile-menu" aria-expanded="false">
                        <span class="absolute -inset-0.5"></span>
                        <span class="sr-only">Open main menu</span>
                        <!--
                  Icon when menu is closed.
      
                  Menu open: "hidden", Menu closed: "block"
                -->
                        <svg class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                        <!--
                  Icon when menu is open.
      
                  Menu open: "block", Menu closed: "hidden"
                -->
                        <svg class="hidden h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>

                    </button>
                </div>
                <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
                    <div class="flex flex-shrink-0 items-center">
                        <img class="h-8 w-auto"
                            src="https://mathequalslove.net/wp-content/uploads/2023/02/magic-square-15-puzzle-featured-image-1024x1024.jpg"
                            alt="Your Company">
                    </div>
                    <div class="hidden sm:ml-6 sm:block">
                        <div class="flex space-x-4">
                            <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                            <a href="#" class="bg-gray-900 text-white rounded-md px-3 py-2 text-sm font-medium"
                                aria-current="page">Make 15(Beta Version)</a>
                        </div>
                    </div>
                </div>
                <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
                    <button type="button"
                        class="relative rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800">
                        <span class="absolute -inset-1.5"></span>
                        <span class="sr-only">View notifications</span>
                        <i class="fa-solid fa-cash-register fa-xl cursor-pointer transform active:scale-90 transition-transform duration-200"
                            id="scorecard-btn"></i>
                        <!-- <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                            aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
                        </svg> -->
                    </button>

                    <!-- Profile dropdown -->
                    <div class="relative ml-3">
                        <div>
                            <button type="button"
                                class="relative flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800"
                                id="user-menu-button" aria-expanded="false" aria-haspopup="true">
                                <span class="absolute -inset-1.5"></span>
                                <span class="sr-only">Open user menu</span>
                                <a href="#" class="bg-gray-900 text-white rounded-md px-3 py-2 text-sm font-medium"
                                    aria-current="page" id="player-id"></a>
                                <img class="h-8 w-8 rounded-full ml-3"
                                    src="https://icons.veryicon.com/png/o/miscellaneous/xdh-font-graphics-library/anonymous-user.png"
                                    alt="">
                            </button>
                        </div>

                        <!--
                  Dropdown menu, show/hide based on menu state.
      
                  Entering: "transition ease-out duration-100"
                    From: "transform opacity-0 scale-95"
                    To: "transform opacity-100 scale-100"
                  Leaving: "transition ease-in duration-75"
                    From: "transform opacity-100 scale-100"
                    To: "transform opacity-0 scale-95"
                -->
                        <div class="absolute hidden right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
                            role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">
                            <!-- Active: "bg-gray-100", Not Active: "" -->
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="-1"
                                id="user-menu-item-0">Your Profile</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="-1"
                                id="user-menu-item-1">Settings</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="-1"
                                id="user-menu-item-2">Sign out</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile menu, show/hide based on menu state. -->

        <!-- <div class="sm:hidden" id="mobile-menu">
            <div class="space-y-1 px-2 pb-3 pt-2"> -->
        <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
        <!-- <a href="#" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium"
                    aria-current="page">Dashboard</a>
                <a href="#"
                    class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">Team</a>
                <a href="#"
                    class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">Projects</a>
                <a href="#"
                    class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">Calendar</a> -->
        <!-- </div>
        </div> -->

    </nav>

    <div class="sm:w-1/3 mx-auto mt-8 bg-white p-4 rounded-md shadow-md flex items-center justify-between"
        id="copy-div">
        <p class="mr-4 font-semibold" id="copy-id"></p>
        <!-- <button id="copyButton"
            class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring focus:border-blue-300">
            Copy to Clipboard
        </button> -->
        <i class="fa-solid fa-copy fa-xl cursor-pointer transform active:scale-90 transition-transform duration-200"
            id="copyButton"></i>
    </div>

    <div class="container sm:w-full lg:w-2/3 mx-auto mt-8 mb-8" id="game-grid">
        <div class="row-abc h-48 flex">
            <div class="grid grid-cols-3 w-1/3 h-48" id="grid-a"></div>
            <div class="grid grid-cols-3 w-1/3 h-48" id="grid-b"></div>
            <div class="grid grid-cols-3 w-1/3 h-48" id="grid-c"></div>
        </div>

        <div class="row-def h-48 flex">
            <div class="grid grid-cols-3 w-1/3 h-48" id="grid-d"></div>
            <div class="grid grid-cols-3 w-1/3 h-48" id="grid-e"></div>
            <div class="grid grid-cols-3 w-1/3 h-48" id="grid-f"></div>
        </div>

        <div class="row-ghi h-48 flex">
            <div class="grid grid-cols-3 w-1/3 h-48" id="grid-g"></div>
            <div class="grid grid-cols-3 w-1/3 h-48" id="grid-h"></div>
            <div class="grid grid-cols-3 w-1/3 h-48" id="grid-i"></div>
        </div>

    </div>

    <!-- Modal: -->
    <div class="relative z-10 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true" id="modal">

        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

        <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0">

                <div
                    class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-screen sm:w-full sm:max-w-lg">
                    <div class="bg-white px-auto h-64 sm:h-32">
                        <div class="sm:flex sm:items-start ">

                            <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full">
                                <h3 class="text-base mt-4 font-semibold leading-6 text-gray-900 w-full"
                                    id="modal-title">Choose Your Number</h3>
                                <div class="mt-4 w-2/3 sm:w-full mx-auto">
                                    <div class="grid grid-cols-3 sm:grid-cols-9 gap-1">
                                        <div class="make-input flex items-center justify-center cursor-pointer border border-gray-100 shadow-lg rounded-full h-12 text-green-500"
                                            id="modal-1">1</div>
                                        <div class="make-input flex items-center justify-center cursor-pointer border border-gray-100 shadow-lg rounded-full h-12 text-green-500"
                                            id="modal-2">2</div>
                                        <div class="make-input flex items-center justify-center cursor-pointer border border-gray-100 shadow-lg rounded-full h-12 text-green-500"
                                            id="modal-3">3</div>
                                        <div class="make-input flex items-center justify-center cursor-pointer border border-gray-100 shadow-lg rounded-full h-12 text-green-500"
                                            id="modal-4">4</div>
                                        <div class="make-input flex items-center justify-center cursor-pointer border border-gray-100 shadow-lg rounded-full h-12 text-green-500"
                                            id="modal-5">5</div>
                                        <div class="make-input flex items-center justify-center cursor-pointer border border-gray-100 shadow-lg rounded-full h-12 text-green-500"
                                            id="modal-6">6</div>
                                        <div class="make-input flex items-center justify-center cursor-pointer border border-gray-100 shadow-lg rounded-full h-12 text-green-500"
                                            id="modal-7">7</div>
                                        <div class="make-input flex items-center justify-center cursor-pointer border border-gray-100 shadow-lg rounded-full h-12 text-green-500"
                                            id="modal-8">8</div>
                                        <div class="make-input flex items-center justify-center cursor-pointer border border-gray-100 shadow-lg rounded-full h-12 text-green-500"
                                            id="modal-9">9</div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                        <button type="button"
                            class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto"
                            id="apply-move">Apply</button>
                        <button type="button"
                            class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto"
                            id="close-modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scoreboard -->
    <div class="relative hidden z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true" id="scorecard">

        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity overlay"></div>

        <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">

                <div
                    class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl">
                    <div class="w-full text-center font-bold mt-5">Points Table</div>
                    <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                        <div class="flex flex-col">
                            <div class="overflow-x-auto sm:-mx-6 lg:-mx-8">
                                <div class="inline-block min-w-full py-2 sm:px-6 lg:px-8">
                                    <div class="overflow-hidden">
                                        <table class="min-w-full text-center text-sm font-light">
                                            <thead class="font-medium">
                                                <tr>
                                                    <th scope="col" class="px-6 py-4">Square</th>
                                                    <th scope="col" class="px-6 py-4" id="player-1-in-table"></th>
                                                    <th scope="col" class="px-6 py-4" id="player-2-in-table"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                        <button type="button"
                            class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto overlay">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </div>
    <script>

    </script>
</body>

</html>